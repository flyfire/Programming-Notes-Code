# 继承、多态、接口

---
## 1 继承 

面向对象程序设计中最重要的一个概念是继承。继承允许我们依据另一个类来定义一个类，这使得创建和维护一个应用程序变得更容易。
这样做，也达到了重用代码功能和提高执行时间的效果。

- 被继承者称为基类
- 继承者成为派生类

继承代表了 is a 关系

继承的语法如下
```
class derived-class: access-specifier base-class

访问修饰符 access-specifier 是 public、protected 或 private 其中的一个
base-class 是之前定义过的某个类的名称。如果未使用访问修饰符 access-specifier，则默认为 private。
```

---
## 3 继承与访问控制权

派生类可以访问基类中所有的非私有成员。因此基类成员如果不想被派生类的成员函数访问，则应在基类中声明为 private。

一个派生类继承了所有的基类方法，但下列情况除外：

- 基类的构造函数、析构函数和拷贝构造函数。
- 基类的重载运算符。
- 基类的友元函数。

---
## 3 继承类型

当一个类派生自基类，该基类可以被继承为 `public`、`protected` 或 `private` 几种类型。
继承类型是通过访问修饰符来指定的。

- 公有继承（`public`）：当一个类派生自公有基类时，基类的公有成员也是派生类的公有成员，基类的保护成员也是派生类的保护成员，基类的私有成员不能直接被派生类访问，但是可以通过调用基类的公有和保护成员来访问。
- 保护继承（`protected`）： 当一个类派生自保护基类时，基类的公有和保护成员将成为派生类的保护成员。
- 私有继承（`private`）：当一个类派生自私有基类时，基类的公有和保护成员将成为派生类的私有成员。

---
## 4 多继承

多继承即一个子类可以有多个父类，它继承了多个父类的特性。

```
class <derived-class>:<inheritance-mode 1><base-class1>,:<inheritance-mode 2><base-class2>,…
{

};
```

---
##  5 多态

当类之间存在层次结构，并且类之间是通过继承关联时，就会用到多态。C++ 多态意味着调用成员函数时，会根据调用函数的对象的类型来执行不同的函数。

## 6 静态链接

如果基类中的函数不是虚函数，那么即使派生类重写了该函数，当以基类形态去调用实际类型为派生类的函数时，调用的是基类中的函数。
即函数调用在程序执行前就准备好了。有时候这也被称为早绑定

## 7 虚函数

虚函数 是在基类中使用关键字 virtual 声明的函数。在派生类中重新定义基类中定义的虚函数时，会告诉编译器不要静态链接到该函数。
在程序中任意点可以根据所调用的对象类型来选择调用的函数，这种操作被称为动态链接，或后期绑定。

### 纯虚函数

在基类中不对虚函数给出有意义的实现，这个时候就是纯虚函数。

虚函数声明：`virtual ReturnType FunctionName(Parameter)` ，虚函数必须实现，如果不实现，编译器将报错

- 纯虚函数一定没有定义，纯虚函数用来规范派生类的行为，即接口。
- 包含纯虚函数的类是抽象类，抽象类不能定义实例，但可以声明指向实现该抽象类的具体类的指针或引用。
- 对于虚函数来说，父类和子类都有各自的版本。由多态方式调用的时候动态绑定。
- 虚函数是C++中用于实现多态(polymorphism)的机制。核心理念就是通过基类访问派生类定义的函数。
- 在有动态分配堆上内存的时候，析构函数必须是虚函数，但没有必要是纯虚的。
- 友元不是成员函数，只有成员函数才可以是虚拟的，因此友元不能是虚拟函数。但可以通过让友元函数调用虚拟成员函数来解决友元的虚拟问题。
- 析构函数应当是虚函数，将调用相应对象类型的析构函数，因此，**如果指针指向的是子类对象，将调用子类的析构函数，然后自动调用基类的析构函数**。
- 如果基类的虚函数不是纯虚函数，则派生类可以在实现中调用基类的虚函数

---
## 8 接口（抽象类）

接口描述了类的行为和功能，而不需要完成类的特定实现。如果类中至少有一个函数被声明为纯虚函数，则这个类就是抽象类。
设计抽象类的目的，是为了给其他类提供一个可以继承的适当的基类。抽象类不能被用于实例化对象，它只能作为接口使用。